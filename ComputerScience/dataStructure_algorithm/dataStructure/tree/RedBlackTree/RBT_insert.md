###### 红黑树的插入操作

◆ 基本描述  
● 要将红黑树当作一棵二叉查找树，找到插入的位置；  
● 将节点着色为红色（默认就是红色）；  
● 通过旋转 和 重新着色，对其修正，使之成为一棵新的红黑树；  

◆ 要将红黑树当作一棵二叉查找树，找到插入的位置；  
红黑树本身就是一棵二叉查找树，将节点插入后，该树仍然是一颗二叉查找树。    
任何的旋转和重新着色操作之后，它仍然是一颗二叉查找树。  

◆ 将节点着色为红色（默认就是红色）；  
因为新插入的节点，肯定是叶子节点咯；因为红黑树的基本属性，第5条：  
【对于每个节点，从该节点到 其所有子节点的简单路径上， 均包含相同数量的黑色节点】；  
接下来，还要依次满足剩余所有的基本属性；  

◆ 通过旋转 和 重新着色，对其修正，使之成为一棵新的红黑树；  
对于第1点【每个节点 是红色、或者是黑色】，当前节点就是红色的，满足；  
对于第2点【根节点 是黑色】，从来没变过，满足；  
对于第3点【每个NULL节点 是黑色】，创建时，满足 ；  
对于第4点【如果一个节点是红色的，那么他的左右子节点都是黑色的】，需要修改，暂时不一定满足；  
对于第5点【对于每个节点，从该节点到 其所有子节点的简单路径上， 均包含相同数量的黑色节点】，插入的是红色的，不会改变黑高，满足；  

所以，接下来，搞定红黑树的基本属性的第5点，就是一棵新的红黑树了！  

◆ 为什么要旋转红黑树呢？     
因为红黑树在 添加 或者 删除 节点的时候， 可能会改变其状态，使得其不满足红黑的5项基本属性；  
红黑树的旋转，包括左旋转 和 右旋转；  

◆ 什么情况下需要旋转，什么情况下不需要旋转？    
[如果新插入的 当前节点 的 父节点，是 黑色的，就不需要做任何操作；](../image_files/RBT_005.png)  
如果新插入的 当前节点 的 父节点，是 红色的，就需要重新着色、旋转；  

◆ 旋转后，颜色的问题  
之前是父节点的位置，是黑色的，来了个新节点，父节点仍是黑色的；  
之前是父节点，变成子节点，子节点该是红色的，新的子节点 仍是红色的；

左旋转，会带着其左父亲转，右父亲不转；  

◆ 旋转法则  
（1）当前节点是根节点，直接设为黑色的；  
（2）当前节点是 的父节点 是黑色的，无序任何操作；  
（3）当前节点 的父节点 是红色的，叔叔节点是红色的；    
● 将 当前节点的 父亲节点 设为 黑色；    
● 将 当前节点的 叔叔节点 设为 黑色；    
● 将 当前节点的 祖父节点 设为 红色；    
● 将 当前节点的 祖父节点 设为 新节点，继续判断；  

（4）当前节点 的父节点 是红色的，叔叔节点是T.nil 或者 叔叔节点是黑色的，当前节点是右孩子；  
● 将 父节点 作为 新的当前节点；  
● 以当前节点 为支点进行左旋，继续判断；  

（5）当前节点 的父节点 是红色的，叔叔节点是T.nil 或者 叔叔节点是黑色的，当前节点是左孩子；  
● 将 父节点 设为黑色；  
● 将 祖父节点 设为红色；  
● 以 祖父节点 为支点进行右旋，继续判断；  


